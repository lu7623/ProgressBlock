(()=>{"use strict";(()=>{class e{#e;#t;constructor(e,t){this.#e=e,this.#t=t}setState(e){this.#e=e}setValue(e){this.#t=e}getProgressState(){return{state:this.#e,value:this.#t}}}const t={NORMAL:"normal",ANIMATED:"animated",HIDDEN:"hidden"};class s{constructor(e,t,s,r){this.block=this.createProgressBlock(e,t,s,r)}createProgressBlock(e,t,s,r){const a=document.getElementById(t)||document.body,d=document.createElement("div");return d.id=e,d.classList.add("circle"),d.classList.add(s),a.append(d),document.documentElement.style.setProperty("--value",`${r}%`),d}updateView(e){for(let e in t)this.block.classList.remove(t[e]);this.block.classList.add(e.state),document.documentElement.style.setProperty("--value",`${e.value}%`)}}const r={"invalid state":`Стейт блока должен быть одним из вариантов ${Object.values(t).map((e=>`"${e}"`)).join(", ")}`,"invalid value":"Значение должно быть числом от 0 до 100","invalid id":"Неверно задан id элемента"},a=e=>"number"==typeof e&&!isNaN(e)&&e>=0&&e<=100,d=new class{constructor(t,r,a="normal",d=0){this.progressState=new e(a,d),this.progressElement=new s(t,r,a,d)}updateProgressValue(e){if(!a(e))return void(this.errorMessage=r["invalid value"]);this.progressState.setValue(e);const t=this.progressState.getProgressState();this.progressElement.updateView(t),this.errorMessage&&(this.errorMessage="")}updateProgressState(e){if(!(e=>Object.values(t).includes(e))(e))return void(this.errorMessage=r["invalid state"]);this.progressState.setState(e);const s=this.progressState.getProgressState();this.progressElement.updateView(s),this.errorMessage&&(this.errorMessage="")}}("progress","root","normal",75),i=document.getElementById("animation"),o=document.getElementById("value"),n=document.getElementById("hide"),l=document.querySelector(".error-message");o.addEventListener("input",(e=>{a(e.target.value)||(d.updateProgressValue(Number(e.target.value)),l.innerHTML=d.errorMessage)})),i.addEventListener("change",(e=>{e.target.checked?(n.disabled=!0,o.disabled=!0,d.updateProgressState(t.ANIMATED)):(n.disabled=!1,o.disabled=!1,d.updateProgressState(t.NORMAL))})),n.addEventListener("change",(e=>{e.target.checked?(i.disabled=!0,o.disabled=!0,d.updateProgressState(t.HIDDEN)):(i.disabled=!1,o.disabled=!1,d.updateProgressState(t.NORMAL))}))})()})();